{"componentChunkName":"component---src-layouts-post-layout-tsx","path":"/covid-19-api-update/","result":{"data":{"markdownRemark":{"id":"a937fa1a-96e4-5242-a641-8d28b1305f2f","html":"<p class=\"my-4 whitespace-pre-wrap\">이전에 진행했던 프로젝트들이 요즘 한번에 삐걱거리기 시작했다.</p>\n<p class=\"my-4 whitespace-pre-wrap\">얼마전에는 Webtoon API를 전체적으로 수정해야 했는데 이번에는 Covid-19 API가 문제다.</p>\n<p class=\"my-4 whitespace-pre-wrap\">정부에서 단계적 일상회복을 시행함에 따라 공공데이터 포털의 Covid-19 API의 일부 항목이 제외된것이다.</p>\n<p class=\"my-4 whitespace-pre-wrap\">오늘은 이것에 대해 글을 써보려 한다.</p>\n<h2 id=\"covid-19-api\" style=\"position:relative;\" class=\"font-bold mt-10 mb-4 text-3xl\"><a href=\"#covid-19-api\" aria-label=\"covid 19 api permalink\" class=\"anchor before\" class=\"text-blue-500 hover:underline\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Covid-19 API</h2>\n<p class=\"my-4 whitespace-pre-wrap\">지금 만들어서 쓰고있는 API는 Covid-19의 여러 외부 정보들을 종합해서 새로운 데이터를 추가하고 이상치를 제거해 GraphQL로 제공하고있다.</p>\n<p class=\"my-4 whitespace-pre-wrap\">이 데이터를 이용해 Dashboard를 제공하는 토이 프로젝트도 하나 있다.</p>\n<p class=\"my-4 whitespace-pre-wrap\">이번에 API를 수정하면 당연히 Dashboard도 변경사항이 생길것이고 나는 이것을 최소화 하고싶었다.</p>\n<h3 id=\"-변경점과-대응\" style=\"position:relative;\" class=\"font-bold mt-10 mb-4 text-2xl\"><a href=\"#-%EB%B3%80%EA%B2%BD%EC%A0%90%EA%B3%BC-%EB%8C%80%EC%9D%91\" aria-label=\" 변경점과 대응 permalink\" class=\"anchor before\" class=\"text-blue-500 hover:underline\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🚧 변경점과 대응</h3>\n<h4 id=\"보건복지부-코로나19-시도발생-현황의-격리중-환자-수isol_ing_cnt-항목-제외\" style=\"position:relative;\" class=\"font-bold mt-10 mb-4 text-xl\"><a href=\"#%EB%B3%B4%EA%B1%B4%EB%B3%B5%EC%A7%80%EB%B6%80-%EC%BD%94%EB%A1%9C%EB%82%9819-%EC%8B%9C%EB%8F%84%EB%B0%9C%EC%83%9D-%ED%98%84%ED%99%A9%EC%9D%98-%EA%B2%A9%EB%A6%AC%EC%A4%91-%ED%99%98%EC%9E%90-%EC%88%98isol_ing_cnt-%ED%95%AD%EB%AA%A9-%EC%A0%9C%EC%99%B8\" aria-label=\"보건복지부 코로나19 시도발생 현황의 격리중 환자 수isol_ing_cnt 항목 제외 permalink\" class=\"anchor before\" class=\"text-blue-500 hover:underline\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.data.go.kr/iim/api/selectAPIAcountView.do\" class=\"text-blue-500 hover:underline\">보건복지부 코로나19 시·도발생 현황</a>의 격리중 환자 수(ISOL_ING_CNT) 항목 제외</h4>\n<p class=\"my-4 whitespace-pre-wrap\">다행이 이 항목으로 계산하는 다른 값들이 없어 처음에는 해당 항목은 그냥 제거하려고 했다.</p>\n<p class=\"my-4 whitespace-pre-wrap\">하지만 다른 항목들의 값들을 보면서 이 값은 다른 항목의 값들로 계산할 수 있을것 같았다.</p>\n<p class=\"my-4 whitespace-pre-wrap\">전체 확진자 수(DEF_CNT)에서 사망자 수(DEATH_CNT)와 격리 해제 수(ISOL_CLEAR_CNT)를 제외하면 격리중 환자수와 같을거라는 예상을 했고 여러 날짜의 값들을 계산해서 비교해보니 실제로 같았다.</p>\n<p class=\"my-4 whitespace-pre-wrap\">그래서 이항목은 유지할 수 있었다.</p>\n<h4 id=\"단계적-일상회복\" style=\"position:relative;\" class=\"font-bold mt-10 mb-4 text-xl\"><a href=\"#%EB%8B%A8%EA%B3%84%EC%A0%81-%EC%9D%BC%EC%83%81%ED%9A%8C%EB%B3%B5\" aria-label=\"단계적 일상회복 permalink\" class=\"anchor before\" class=\"text-blue-500 hover:underline\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>단계적 일상회복</h4>\n<p class=\"my-4 whitespace-pre-wrap\">정부에서 단계적 일상 회복을 시행하면서 당연히 거리두기 단계가 무의미 해졌고 실제로 정부에서 운영하던 사회적 거리두기 단계를 제공하는 사이트도 사라졌다.</p>\n<p class=\"my-4 whitespace-pre-wrap\">문제는 내가 만든 API에서 사용하는 거리두기 단계는 이 사이트를 매일 크롤링해온 값으로 제공되는데 사이트가 없어졌고 거리두기 단계 자체도 무의미 해졌으니 이 항목은 제외할 수밖에 없었다.</p>\n<h3 id=\"-기존-데이터-저장\" style=\"position:relative;\" class=\"font-bold mt-10 mb-4 text-2xl\"><a href=\"#-%EA%B8%B0%EC%A1%B4-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%80%EC%9E%A5\" aria-label=\" 기존 데이터 저장 permalink\" class=\"anchor before\" class=\"text-blue-500 hover:underline\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📦 기존 데이터 저장</h3>\n<p class=\"my-4 whitespace-pre-wrap\">혹시 몰라 이전 데이터들은 모두 JSON 형식으로 저장해두었다.</p>\n<p class=\"my-4 whitespace-pre-wrap\">이전 데이터를 사용하는 프로젝트가 있다면 Github에 저장된 JSON값을 받아와 보이는 뷰 정도만 유지해줄 생각이었다.</p>\n<h2 id=\"dashboard-수정\" style=\"position:relative;\" class=\"font-bold mt-10 mb-4 text-3xl\"><a href=\"#dashboard-%EC%88%98%EC%A0%95\" aria-label=\"dashboard 수정 permalink\" class=\"anchor before\" class=\"text-blue-500 hover:underline\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dashboard 수정</h2>\n<p class=\"my-4 whitespace-pre-wrap\">앞서 언급했던 것처럼 API를 수정한 뒤 실제로 제외된 항목은 사회적 거리두기 단계밖에 없으니 관련된 그래프들을 모두 제거해주었다.</p>\n<p class=\"my-4 whitespace-pre-wrap\">정부에서 정한 거리두기 단계 기준과 실제 감염 상황으로 거리두기 단계 변화를 예상하는 그래프는 지우기 아까웠지만 제공되는 데이터가 모두 사라진 마당에 남겨둘 수 없었다.</p>\n<p class=\"my-4 whitespace-pre-wrap\">Dashboard는 내가 순수 HTML, CSS, Javascript를 너무 안 쓰다 보니 잊어버릴 것 같아서 React나 Vue.js 같은 프레임워크(라이브러리) 없이 만들었었는데 코드를 너무 더럽게 작성해놔서 수정하는데 애먹었다.</p>","headings":[{"depth":2,"value":"Covid-19 API","id":"covid-19-api"},{"depth":3,"value":"🚧 변경점과 대응","id":"-변경점과-대응"},{"depth":4,"value":"보건복지부 코로나19 시·도발생 현황의 격리중 환자 수(ISOL_ING_CNT) 항목 제외","id":"보건복지부-코로나19-시도발생-현황의-격리중-환자-수isol_ing_cnt-항목-제외"},{"depth":4,"value":"단계적 일상회복","id":"단계적-일상회복"},{"depth":3,"value":"📦 기존 데이터 저장","id":"-기존-데이터-저장"},{"depth":2,"value":"Dashboard 수정","id":"dashboard-수정"}],"frontmatter":{"title":"Covid-19 API 업데이트","date":"21년 11월 30일","description":"단계적 일상회복에 따른 Covid-19 API 업데이트","tags":["project"]}},"previous":{"fields":{"slug":"/korea-webtoon-api-update/"},"frontmatter":{"title":"Webtoon API 업데이트","titleImage":"https://user-images.githubusercontent.com/71566740/144698893-3177ecc1-ce90-49ae-8e98-4986f66bce7a.png"}},"next":{"fields":{"slug":"/blog-remake-review2/"},"frontmatter":{"title":"Gatsby 블로그 이전","titleImage":"https://user-images.githubusercontent.com/71566740/138983411-93742554-e2ab-4e18-9588-f2dc9aaf2883.png"}}},"pageContext":{"id":"a937fa1a-96e4-5242-a641-8d28b1305f2f","previousPostId":"6b3a1858-27f6-5961-8c64-358503d15a66","nextPostId":"bccae1d5-e504-5132-8b71-2e7d113764b7"}},"staticQueryHashes":["2964855266","3766628212","4278130389","825490659"],"slicesMap":{}}